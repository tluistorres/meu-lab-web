<script>
    const taskInput = document.getElementById('taskInput');
    const taskList = document.getElementById('taskList');

    // 1. CARREGAR: Assim que o site abre, busca o que est치 salvo
    window.onload = function() {
        const salvas = JSON.parse(localStorage.getItem('minhasTarefas')) || [];
        salvas.forEach(tarefa => criarElementoTarefa(tarefa.texto, tarefa.concluida));
    };

    function addTask() {
        const text = taskInput.value.trim();
        if (text === '') return;
        
        criarElementoTarefa(text, false);
        saveTasks(); // Salva ap칩s adicionar
        taskInput.value = '';
    }

    function criarElementoTarefa(texto, concluida) {
        const li = document.createElement('li');
        if (concluida) li.classList.add('completed');
        
        li.innerHTML = `
            <span onclick="toggleTask(this)">${texto}</span>
            <button class="delete-btn" onclick="removeTask(this)">Apagar</button>
        `;
        taskList.appendChild(li);
    }

    function toggleTask(span) {
        span.parentElement.classList.toggle('completed');
        saveTasks(); // Salva ap칩s riscar a tarefa
    }

    function removeTask(btn) {
        btn.parentElement.remove();
        saveTasks(); // Salva ap칩s apagar
    }

    // 2. SALVAR: Transforma a lista em texto e guarda no navegador
    function saveTasks() {
        const tarefas = [];
        document.querySelectorAll('#taskList li').forEach(li => {
            tarefas.push({
                texto: li.querySelector('span').innerText,
                concluida: li.classList.contains('completed')
            });
        });
        localStorage.setItem('minhasTarefas', JSON.stringify(tarefas));
    }

    taskInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') addTask();
    });
</script>
